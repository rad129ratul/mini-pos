import{d as o,e as t,t as i,l as f,n as b,o as l,m as v,f as u,r as x,g as _,F as m,i as h}from"./vendor-D4pjJ2_S.js";import{_ as y}from"./app-CtrPb6go.js";import{s as k}from"./saleService-CiGuVxoJ.js";import"./api-DPQzmjXj.js";const S={name:"StatsCard",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0},icon:{type:String,required:!0},color:{type:String,default:"#0d6efd"},prefix:{type:String,default:""}},computed:{formattedValue(){return this.prefix?`${this.prefix}${this.formatNumber(this.value)}`:this.formatNumber(this.value)}},methods:{formatNumber(r){return typeof r=="number"?r.toLocaleString():r}}},w={class:"card-body"},N={class:"d-flex justify-content-between align-items-center"},D={class:"text-muted mb-2"},C={class:"mb-0 fw-bold"};function L(r,s,n,g,e,c){return l(),o("div",{class:"card h-100 shadow-sm",style:f({borderLeft:`4px solid ${n.color}`})},[t("div",w,[t("div",N,[t("div",null,[t("h6",D,i(n.title),1),t("h2",C,i(c.formattedValue),1)]),t("div",null,[t("i",{class:b("bi fs-1"),style:f({color:n.color})},null,4)])])])],4)}const I=y(S,[["render",L],["__scopeId","data-v-d7cca035"]]),T={name:"Dashboard",components:{StatsCard:I},data(){return{stats:{today_sales:0,today_transactions:0,total_products:0,low_stock_count:0,low_stock_products:[],recent_sales:[],top_products:[]},loading:!1,refreshInterval:null}},mounted(){this.fetchStats(),this.refreshInterval=setInterval(()=>{this.fetchStats()},3e4)},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async fetchStats(){this.loading=!0;try{this.stats=await k.getDashboardStats()}catch(r){console.error("Error fetching dashboard stats:",r)}finally{this.loading=!1}},formatDate(r){return new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatNumber(r){return parseFloat(r).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}}},q={class:"container-fluid py-4"},P={key:0,class:"text-center py-5"},V={key:1},F={class:"row g-4 mb-4"},U={class:"col-12 col-sm-6 col-xl-3"},A={class:"col-12 col-sm-6 col-xl-3"},B={class:"col-12 col-sm-6 col-xl-3"},z={class:"col-12 col-sm-6 col-xl-3"},E={class:"row g-4"},j={class:"col-12 col-lg-7"},M={class:"card shadow-sm"},R={class:"card-body"},W={key:0,class:"table-responsive"},G={class:"table table-hover mb-0"},H={class:"fw-bold text-success"},J={key:1,class:"text-center py-4 text-muted"},K={class:"col-12 col-lg-5"},O={class:"card shadow-sm"},Q={class:"card-body"},X={key:0,class:"table-responsive"},Y={class:"table table-sm mb-0"},Z={class:"text-end"},$={key:1,class:"text-center py-4 text-muted"},tt={key:0,class:"row g-4 mt-2"},st={class:"col-12"},et={class:"card shadow-sm"},ot={class:"card-body"},lt={class:"table-responsive"},at={class:"table table-hover mb-0"},rt={key:0,class:"bi bi-trophy-fill text-warning me-2"},it={class:"text-end"},nt={class:"badge bg-primary"};function ct(r,s,n,g,e,c){const d=x("StatsCard");return l(),o("div",q,[s[9]||(s[9]=t("h2",{class:"fw-bold mb-4"},"Dashboard",-1)),e.loading?(l(),o("div",P,[...s[0]||(s[0]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),t("p",{class:"mt-2"},"Loading dashboard...",-1)])])):(l(),o("div",V,[t("div",F,[t("div",U,[u(d,{title:"Today's Sales",value:e.stats.today_sales,icon:"bi-currency-dollar",color:"#28a745",prefix:"৳"},null,8,["value"])]),t("div",A,[u(d,{title:"Today's Transactions",value:e.stats.today_transactions,icon:"bi-receipt",color:"#0d6efd"},null,8,["value"])]),t("div",B,[u(d,{title:"Total Products",value:e.stats.total_products,icon:"bi-box-seam",color:"#6f42c1"},null,8,["value"])]),t("div",z,[u(d,{title:"Low Stock Alerts",value:e.stats.low_stock_count,icon:"bi-exclamation-triangle",color:e.stats.low_stock_count>0?"#dc3545":"#ffc107"},null,8,["value","color"])])]),t("div",E,[t("div",j,[t("div",M,[s[3]||(s[3]=t("div",{class:"card-header bg-white"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-clock-history me-2"}),_(" Recent Sales ")])],-1)),t("div",R,[e.stats.recent_sales&&e.stats.recent_sales.length>0?(l(),o("div",W,[t("table",G,[s[1]||(s[1]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Date"),t("th",null,"Customer"),t("th",null,"Amount"),t("th",null,"Payment")])],-1)),t("tbody",null,[(l(!0),o(m,null,h(e.stats.recent_sales,a=>(l(),o("tr",{key:a.id},[t("td",null,[t("small",null,i(c.formatDate(a.date)),1)]),t("td",null,i(a.customer_name||"Walk-in"),1),t("td",H,"৳"+i(c.formatNumber(a.amount)),1),t("td",null,[t("span",{class:b(["badge",a.payment_method==="cash"?"bg-success":"bg-primary"])},i(a.payment_method.toUpperCase()),3)])]))),128))])])])):(l(),o("div",J,[...s[2]||(s[2]=[t("i",{class:"bi bi-inbox fs-1"},null,-1),t("p",{class:"mt-2"},"No sales yet",-1)])]))])])]),t("div",K,[t("div",O,[s[6]||(s[6]=t("div",{class:"card-header bg-white"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-exclamation-circle me-2"}),_(" Low Stock Products ")])],-1)),t("div",Q,[e.stats.low_stock_products&&e.stats.low_stock_products.length>0?(l(),o("div",X,[t("table",Y,[s[4]||(s[4]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Product"),t("th",{class:"text-end"},"Stock")])],-1)),t("tbody",null,[(l(!0),o(m,null,h(e.stats.low_stock_products,a=>(l(),o("tr",{key:a.id},[t("td",null,i(a.name),1),t("td",Z,[t("span",{class:b(["badge",{"bg-danger":a.stock_quantity===0,"bg-warning":a.stock_quantity>0}])},i(a.stock_quantity),3)])]))),128))])])])):(l(),o("div",$,[...s[5]||(s[5]=[t("i",{class:"bi bi-check-circle fs-1 text-success"},null,-1),t("p",{class:"mt-2"},"All products in stock",-1)])]))])])])]),e.stats.top_products&&e.stats.top_products.length>0?(l(),o("div",tt,[t("div",st,[t("div",et,[s[8]||(s[8]=t("div",{class:"card-header bg-white"},[t("h5",{class:"mb-0"},[t("i",{class:"bi bi-star me-2"}),_(" Top Selling Products (This Month) ")])],-1)),t("div",ot,[t("div",lt,[t("table",at,[s[7]||(s[7]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Product Name"),t("th",{class:"text-end"},"Total Sold")])],-1)),t("tbody",null,[(l(!0),o(m,null,h(e.stats.top_products,(a,p)=>(l(),o("tr",{key:p},[t("td",null,[p===0?(l(),o("i",rt)):v("",!0),_(" "+i(a.name),1)]),t("td",it,[t("span",nt,i(a.total_quantity),1)])]))),128))])])])])])])])):v("",!0)]))])}const ht=y(T,[["render",ct],["__scopeId","data-v-4f465a1a"]]);export{ht as default};
